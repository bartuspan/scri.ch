(function(e,m){function n(b,j){var d=f.getImageData(0,0,c.width,c.height);c.width=0;c.height=0;var i=j||(e.innerHeight>g?e.innerHeight:g);c.width=b||(e.innerWidth>h?e.innerWidth:h);c.height=i;k.setAttribute("width",d.width);k.setAttribute("height",d.height);k.getContext("2d").putImageData(d,0,0);f.drawImage(k,0,0)}function o(b){if(b.button!==2){var b=p(b),j=b.x,d=b.y,i=j+1,e=d+1;i>h&&(h=i);e>g&&(g=e);f.fillStyle="#000000";f.fillRect(j-1,d-1,2,2);f.beginPath();f.moveTo(b.x,b.y);x();window.addEventListener("mousemove",
l,!1);c.addEventListener("touchmove",l,!1)}}function q(){f.stroke();window.removeEventListener("mousemove",l,!1);c.removeEventListener("touchmove",l,!1)}function x(){if(!r){r=!0;for(var b=[s,t,y],c=function(b){b.stopPropagation()};b.length;){var d=b.shift();d.style.display="block";d.addEventListener("mousedown",c,!1)}}}function l(b){b.preventDefault();var c=p(b),b=c.x,c=c.y,d=b+1,e=c+1;d>h&&(h=d);e>g&&(g=e);f.lineTo(b,c);f.stroke()}function p(b){return{x:b.touches?b.touches[0].pageX:b.pageX,y:b.touches?
b.touches[0].pageY:b.pageY}}function u(){e.addEventListener("resize",function(){n()},!1);n();m.body.addEventListener("touchmove",function(b){b.preventDefault()},!1);c.addEventListener("mousedown",o,!0);c.addEventListener("touchstart",function(b){b.preventDefault();o(b)},!1);window.addEventListener("mouseup",q,!1);c.addEventListener("touchend",q,!1);s.onclick=function(){n(h,g);if(h>0&&g>0)z.value=c.toDataURL("image/png").replace(/^data:image\/png;base64,/,""),A.submit()};t.onclick=function(){window.location=
window.SCRICH_URL}}var c=document.getElementById("draw"),s=document.getElementById("save"),t=document.getElementById("new"),v=document.getElementById("img"),A=document.getElementById("form"),z=document.getElementById("new_draw"),y=document.getElementById("about"),h=0,g=0,r=!1,f=c.getContext("2d"),k=m.createElement("canvas");c.getContext||e.alert("Please, use a modern browser.");m.onselectstart=function(){return!1};var w=window.a=function(b,e){var d=new Image;d.onload=function(){c.width=h=d.width;
c.height=g=d.height;try{f.drawImage(d,0,0)}catch(i){window.setTimeout(function(){w(b,e)},300)}e&&e()};d.src=b};v?w(v.src,u):u()})(window,document);
